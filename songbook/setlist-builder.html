---
title: Home
nav_order: 00
layout: home
---
<style>
	.builder {
		display: flex;
	}

	ul.draggable {
		list-style-type: none !important;
		border: 1px solid #fff;
		width: 50%;
		margin: 0;
		padding: 0;
	}

	ul.draggable li {
		border: 1px solid #fff;
		border-radius: 4px;
		padding: 2px 4px;
		background-color: #000;
		margin: 4px;
	}

	ul.draggable li.placeholder {
		height: 2em border: 1px solid orange;
		background-color: #fffffd;
	}
</style>
<h2 id="setlist-title">Set List (0:00)</h2>
<div class="builder">
	{% assign all_pages = site.pages %}
	{% assign songs = all_pages | where: "layout", "song" %}
	<ul class="draggable" id="setlist">
	</ul>
	<ul id="catalog" class="draggable">
		{% for song in songs %}
		<li style="list-style-type: none;" class="draggable-song" draggable="true"
			data-duration="{{ song.duration | floor }}">
			{{ song.title }} ({{song.duration | divided_by: 60 | floor }}:{{song.duration | modulo: 60 | floor | plus:
			100 | slice: 1, 2 }})
		</li>
		{% endfor %}
	</ul>
</div>
<textarea id="setlist-text">

</textarea>
<script src="https://code.jquery.com/jquery-3.7.1.min.js"
	integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/ui/1.14.0/jquery-ui.min.js"
	integrity="sha256-Fb0zP4jE3JHqu+IBB9YktLcSjI1Zc6J2b6gTjB0LpoM=" crossorigin="anonymous"></script>
<script>
	window.setListDuration = 0;

	function hhmmss(duration) {
		var hh = Math.floor(duration / 3600);
		var mm = ("" + (100 + Math.floor((duration % 3600) / 60))).substring(1,3);
		var ss = ("" + (100 + (duration % 60))).substring(1,3);
		return `${hh}:${mm}:${ss}`;
	}

	function updateTitle(event, ui) {
		let totalDuration = Array.from(document.querySelectorAll("#setlist li"))
			.map(li => parseInt(li.dataset.duration))
			.reduce((a, c) => a + c, 0);
			let items = Array.from(document.querySelectorAll("#setlist li"))
			.map(li => li.innerHTML)
			.reduce((a, c) => a + "\n * " + c, "");
		document.getElementById("setlist-title").innerHTML = `Set List (${hhmmss(totalDuration)})`;
		document.getElementById("setlist-text").innerText = items;
	}

	$(function () {
		$("#catalog, #setlist").sortable({
			connectWith: "ul",
			placeholder: "placeholder",
			delay: 150,
			stop: updateTitle
		});
		$("#catalog").disableSelection()
			.dblclick(function (e) {
				var item = e.target;
				if (e.currentTarget.id === 'catalog') {
					$(item).fadeOut('fast', function () {
						$(item).appendTo($('#setlist')).fadeIn('slow');
					});
				} else {
					$(item).fadeOut('fast', function () {
						$(item).appendTo($('#catalog')).fadeIn('slow');
					});
				}
			});
	});
</script>
